var J=Object.defineProperty;var Z=(r,t,e)=>t in r?J(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var u=(r,t,e)=>(Z(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();const K="modulepreload",tt=function(r,t){return new URL(r,t).href},Q={},et=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=tt(o,n),o in Q)return;Q[o]=!0;const s=o.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const a=i[m];if(a.href===o&&(!s||a.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const f=document.createElement("link");if(f.rel=s?"stylesheet":K,s||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),s)return new Promise((m,a)=>{f.addEventListener("load",m),f.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},rt=et(()=>import("./regl-4c113d0f.js").then(r=>r.r),[],import.meta.url);class nt{constructor(t){u(this,"_canvasDom");u(this,"_context");u(this,"_webglDom");u(this,"_reglContext");u(this,"screenHeight");u(this,"screenWidth");u(this,"IsProgramValid",!1);this._webglDom=document.querySelector(t),this._context=this._webglDom.getContext("webgl"),this.RegisterDomEvent(),this.SetCanvasSize()}get aspect_ratio(){return window.innerHeight/window.innerWidth}RegisterDomEvent(){window.addEventListener("resize",()=>{this.SetCanvasSize()})}async CreatREGLCanvas(t){return(await rt).default(t)}SetCanvasSize(){this.SetCanvasToSceenSize(this._webglDom),this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth,console.log("Browser Aspect ratio "+window.innerHeight/window.innerWidth)}SetCanvasToSceenSize(t){t.width=window.innerWidth*window.devicePixelRatio,t.height=window.innerHeight*window.devicePixelRatio}}var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Se(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var v={},y={},_={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var t=Object.prototype.hasOwnProperty;r.has=function(a,c){return t.call(a,c)};function e(a,c){return a<c?-1:a===c?0:1}r.defaultCompare=e;function n(a,c){return a===c}r.defaultEquals=n;function i(a){return a===null?"COLLECTION_NULL":l(a)?"COLLECTION_UNDEFINED":d(a)?"$s"+a:"$o"+a.toString()}r.defaultToString=i;function o(a,c){if(c===void 0&&(c=","),a===null)return"COLLECTION_NULL";if(l(a))return"COLLECTION_UNDEFINED";if(d(a))return a.toString();var p="{",N=!0;for(var I in a)r.has(a,I)&&(N?N=!1:p=p+c,p=p+I+":"+a[I]);return p+"}"}r.makeString=o;function s(a){return typeof a=="function"}r.isFunction=s;function l(a){return typeof a>"u"}r.isUndefined=l;function d(a){return Object.prototype.toString.call(a)==="[object String]"}r.isString=d;function f(a){return l(a)||!s(a)?function(c,p){return c<p?1:c===p?0:-1}:function(c,p){return a(c,p)*-1}}r.reverseCompareFunction=f;function m(a){return function(c,p){return a(c,p)===0}}r.compareToEquals=m})(_);Object.defineProperty(y,"__esModule",{value:!0});var A=_;function j(r,t,e){for(var n=e||A.defaultEquals,i=r.length,o=0;o<i;o++)if(n(r[o],t))return o;return-1}y.indexOf=j;function it(r,t,e){for(var n=e||A.defaultEquals,i=r.length,o=i-1;o>=0;o--)if(n(r[o],t))return o;return-1}y.lastIndexOf=it;function ot(r,t,e){return j(r,t,e)>=0}y.contains=ot;function st(r,t,e){var n=j(r,t,e);return n<0?!1:(r.splice(n,1),!0)}y.remove=st;function at(r,t,e){for(var n=e||A.defaultEquals,i=r.length,o=0,s=0;s<i;s++)n(r[s],t)&&o++;return o}y.frequency=at;function ut(r,t,e){var n=e||A.defaultEquals;if(r.length!==t.length)return!1;for(var i=r.length,o=0;o<i;o++)if(!n(r[o],t[o]))return!1;return!0}y.equals=ut;function lt(r){return r.concat()}y.copy=lt;function ft(r,t,e){if(t<0||t>=r.length||e<0||e>=r.length)return!1;var n=r[t];return r[t]=r[e],r[e]=n,!0}y.swap=ft;function ht(r){return"["+r.toString()+"]"}y.toString=ht;function ct(r,t){for(var e=0,n=r;e<n.length;e++){var i=n[e];if(t(i)===!1)return}}y.forEach=ct;var U={},w={};Object.defineProperty(w,"__esModule",{value:!0});var g=_,dt=function(){function r(t){this.table={},this.nElements=0,this.toStr=t||g.defaultToString}return r.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!g.isUndefined(e))return e.value},r.prototype.setValue=function(t,e){if(!(g.isUndefined(t)||g.isUndefined(e))){var n,i="$"+this.toStr(t),o=this.table[i];return g.isUndefined(o)?(this.nElements++,n=void 0):n=o.value,this.table[i]={key:t,value:e},n}},r.prototype.remove=function(t){var e="$"+this.toStr(t),n=this.table[e];if(!g.isUndefined(n))return delete this.table[e],this.nElements--,n.value},r.prototype.keys=function(){var t=[];for(var e in this.table)if(g.has(this.table,e)){var n=this.table[e];t.push(n.key)}return t},r.prototype.values=function(){var t=[];for(var e in this.table)if(g.has(this.table,e)){var n=this.table[e];t.push(n.value)}return t},r.prototype.forEach=function(t){for(var e in this.table)if(g.has(this.table,e)){var n=this.table[e],i=t(n.key,n.value);if(i===!1)return}},r.prototype.containsKey=function(t){return!g.isUndefined(this.getValue(t))},r.prototype.clear=function(){this.table={},this.nElements=0},r.prototype.size=function(){return this.nElements},r.prototype.isEmpty=function(){return this.nElements<=0},r.prototype.toString=function(){var t="{";return this.forEach(function(e,n){t+=`
	`+e+" : "+n}),t+`
}`},r}();w.default=dt;var T={};Object.defineProperty(T,"__esModule",{value:!0});var pt=_,vt=y,yt=w,mt=function(){function r(t){this.dictionary=new yt.default(t)}return r.prototype.contains=function(t){return this.dictionary.containsKey(t)},r.prototype.add=function(t){return this.contains(t)||pt.isUndefined(t)?!1:(this.dictionary.setValue(t,t),!0)},r.prototype.intersection=function(t){var e=this;this.forEach(function(n){return t.contains(n)||e.remove(n),!0})},r.prototype.union=function(t){var e=this;t.forEach(function(n){return e.add(n),!0})},r.prototype.difference=function(t){var e=this;t.forEach(function(n){return e.remove(n),!0})},r.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(n){return t.contains(n)?!0:(e=!1,!1)}),e},r.prototype.remove=function(t){return this.contains(t)?(this.dictionary.remove(t),!0):!1},r.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){return t(n)})},r.prototype.toArray=function(){return this.dictionary.values()},r.prototype.isEmpty=function(){return this.dictionary.isEmpty()},r.prototype.size=function(){return this.dictionary.size()},r.prototype.clear=function(){this.dictionary.clear()},r.prototype.toString=function(){return vt.toString(this.toArray())},r}();T.default=mt;Object.defineProperty(U,"__esModule",{value:!0});var L=_,_t=w,gt=T,Et=function(){function r(t){this.toStrF=t||L.defaultToString,this.dictionary=new _t.default(this.toStrF),this.nElements=0}return r.prototype.add=function(t,e){if(e===void 0&&(e=1),L.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var n={value:t,copies:e};this.dictionary.setValue(t,n)}return this.nElements+=e,!0},r.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},r.prototype.contains=function(t){return this.dictionary.containsKey(t)},r.prototype.remove=function(t,e){if(e===void 0&&(e=1),L.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var n=this.dictionary.getValue(t);return e>n.copies?this.nElements-=n.copies:this.nElements-=e,n.copies-=e,n.copies<=0&&this.dictionary.remove(t),!0}else return!1},r.prototype.toArray=function(){for(var t=[],e=this.dictionary.values(),n=0,i=e;n<i.length;n++)for(var o=i[n],s=o.value,l=o.copies,d=0;d<l;d++)t.push(s);return t},r.prototype.toSet=function(){for(var t=new gt.default(this.toStrF),e=this.dictionary.values(),n=0,i=e;n<i.length;n++){var o=i[n],s=o.value;t.add(s)}return t},r.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){for(var i=n.value,o=n.copies,s=0;s<o;s++)if(t(i)===!1)return!1;return!0})},r.prototype.size=function(){return this.nElements},r.prototype.isEmpty=function(){return this.nElements===0},r.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},r}();U.default=Et;var z={},O={},C={},D={};Object.defineProperty(D,"__esModule",{value:!0});var b=_,wt=y,It=function(){function r(){this.firstNode=null,this.lastNode=null,this.nElements=0}return r.prototype.add=function(t,e){if(b.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||b.isUndefined(t))return!1;var n=this.createNode(t);if(this.nElements===0||this.lastNode===null)this.firstNode=n,this.lastNode=n;else if(e===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(e===0)n.next=this.firstNode,this.firstNode=n;else{var i=this.nodeAtIndex(e-1);if(i===null)return!1;n.next=i.next,i.next=n}return this.nElements++,!0},r.prototype.first=function(){if(this.firstNode!==null)return this.firstNode.element},r.prototype.last=function(){if(this.lastNode!==null)return this.lastNode.element},r.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(e!==null)return e.element},r.prototype.indexOf=function(t,e){var n=e||b.defaultEquals;if(b.isUndefined(t))return-1;for(var i=this.firstNode,o=0;i!==null;){if(n(i.element,t))return o;o++,i=i.next}return-1},r.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},r.prototype.remove=function(t,e){var n=e||b.defaultEquals;if(this.nElements<1||b.isUndefined(t))return!1;for(var i=null,o=this.firstNode;o!==null;){if(n(o.element,t))return i===null?(this.firstNode=o.next,o===this.lastNode&&(this.lastNode=null)):o===this.lastNode?(this.lastNode=i,i.next=o.next,o.next=null):(i.next=o.next,o.next=null),this.nElements--,!0;i=o,o=o.next}return!1},r.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},r.prototype.equals=function(t,e){var n=e||b.defaultEquals;return!(t instanceof r)||this.size()!==t.size()?!1:this.equalsAux(this.firstNode,t.firstNode,n)},r.prototype.equalsAux=function(t,e,n){for(;t!==null&&e!==null;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},r.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||this.firstNode===null||this.lastNode===null)){var e;if(this.nElements===1)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);n===null?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),n!==null&&n.next!==null&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e}},r.prototype.forEach=function(t){for(var e=this.firstNode;e!==null&&t(e.element)!==!1;)e=e.next},r.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;e!==null;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},r.prototype.toArray=function(){for(var t=[],e=this.firstNode;e!==null;)t.push(e.element),e=e.next;return t},r.prototype.size=function(){return this.nElements},r.prototype.isEmpty=function(){return this.nElements<=0},r.prototype.toString=function(){return wt.toString(this.toArray())},r.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;n<t&&e!==null;n++)e=e.next;return e},r.prototype.createNode=function(t){return{element:t,next:null}},r}();D.default=It;Object.defineProperty(C,"__esModule",{value:!0});var bt=D,xt=function(){function r(){this.list=new bt.default}return r.prototype.enqueue=function(t){return this.list.add(t)},r.prototype.add=function(t){return this.list.add(t)},r.prototype.dequeue=function(){if(this.list.size()!==0){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},r.prototype.peek=function(){if(this.list.size()!==0)return this.list.first()},r.prototype.size=function(){return this.list.size()},r.prototype.contains=function(t,e){return this.list.contains(t,e)},r.prototype.isEmpty=function(){return this.list.size()<=0},r.prototype.clear=function(){this.list.clear()},r.prototype.forEach=function(t){this.list.forEach(t)},r}();C.default=xt;Object.defineProperty(O,"__esModule",{value:!0});var q=_,St=C,Nt=function(){function r(t){this.root=null,this.compare=t||q.defaultCompare,this.nElements=0}return r.prototype.add=function(t){return q.isUndefined(t)?!1:this.insertNode(this.createNode(t))!==null?(this.nElements++,!0):!1},r.prototype.clear=function(){this.root=null,this.nElements=0},r.prototype.isEmpty=function(){return this.nElements===0},r.prototype.size=function(){return this.nElements},r.prototype.contains=function(t){return q.isUndefined(t)?!1:this.searchNode(this.root,t)!==null},r.prototype.search=function(t){var e=this.searchNode(this.root,t);if(e!==null)return e.element},r.prototype.remove=function(t){var e=this.searchNode(this.root,t);return e===null?!1:(this.removeNode(e),this.nElements--,!0)},r.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},r.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},r.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},r.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},r.prototype.minimum=function(){if(!(this.isEmpty()||this.root===null))return this.minimumAux(this.root).element},r.prototype.maximum=function(){if(!(this.isEmpty()||this.root===null))return this.maximumAux(this.root).element},r.prototype.forEach=function(t){this.inorderTraversal(t)},r.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},r.prototype.height=function(){return this.heightAux(this.root)},r.prototype.searchNode=function(t,e){for(var n=1;t!==null&&n!==0;)n=this.compare(e,t.element),n<0?t=t.leftCh:n>0&&(t=t.rightCh);return t},r.prototype.transplant=function(t,e){t.parent===null?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,e!==null&&(e.parent=t.parent)},r.prototype.removeNode=function(t){if(t.leftCh===null)this.transplant(t,t.rightCh);else if(t.rightCh===null)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},r.prototype.inorderTraversalAux=function(t,e,n){t===null||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),!n.stop&&(n.stop=e(t.element)===!1,!n.stop&&this.inorderTraversalAux(t.rightCh,e,n)))},r.prototype.levelTraversalAux=function(t,e){var n=new St.default;for(t!==null&&n.enqueue(t),t=n.dequeue()||null;t!=null;){if(e(t.element)===!1)return;t.leftCh!==null&&n.enqueue(t.leftCh),t.rightCh!==null&&n.enqueue(t.rightCh),t=n.dequeue()||null}},r.prototype.preorderTraversalAux=function(t,e,n){t===null||n.stop||(n.stop=e(t.element)===!1,!n.stop&&(this.preorderTraversalAux(t.leftCh,e,n),!n.stop&&this.preorderTraversalAux(t.rightCh,e,n)))},r.prototype.postorderTraversalAux=function(t,e,n){t===null||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),!n.stop&&(this.postorderTraversalAux(t.rightCh,e,n),!n.stop&&(n.stop=e(t.element)===!1)))},r.prototype.minimumAux=function(t){for(;t!=null&&t.leftCh!==null;)t=t.leftCh;return t},r.prototype.maximumAux=function(t){for(;t!=null&&t.rightCh!==null;)t=t.rightCh;return t},r.prototype.heightAux=function(t){return t===null?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},r.prototype.insertNode=function(t){for(var e=null,n=this.root;n!==null;){var i=this.compare(t.element,n.element);if(i===0)return null;i<0?(e=n,n=n.leftCh):(e=n,n=n.rightCh)}return t.parent=e,e===null?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},r.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},r}();O.default=Nt;var Dt=S&&S.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(z,"__esModule",{value:!0});var kt=O,At=function(r){Dt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(kt.default);z.default=At;var P={};Object.defineProperty(P,"__esModule",{value:!0});var F=_,k=y,Tt=function(){function r(t){this.data=[],this.compare=t||F.defaultCompare}return r.prototype.leftChildIndex=function(t){return 2*t+1},r.prototype.rightChildIndex=function(t){return 2*t+2},r.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},r.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},r.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)k.swap(this.data,e,t),t=e,e=this.parentIndex(t)},r.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)k.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},r.prototype.peek=function(){if(this.data.length>0)return this.data[0]},r.prototype.add=function(t){return F.isUndefined(t)?!1:(this.data.push(t),this.siftUp(this.data.length-1),!0)},r.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},r.prototype.contains=function(t){var e=F.compareToEquals(this.compare);return k.contains(this.data,t,e)},r.prototype.size=function(){return this.data.length},r.prototype.isEmpty=function(){return this.data.length<=0},r.prototype.clear=function(){this.data.length=0},r.prototype.forEach=function(t){k.forEach(this.data,t)},r}();P.default=Tt;var M={},Ot=S&&S.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(M,"__esModule",{value:!0});var Ct=w,x=_,Pt=function(){function r(t,e){this.key=t,this.value=e}return r.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},r}(),X=function(){function r(){this.key=null,this.value=null}return r.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},r}();function Rt(r){return!r.next}var Lt=function(r){Ot(t,r);function t(e){var n=r.call(this,e)||this;return n.head=new X,n.tail=new X,n.head.next=n.tail,n.tail.prev=n.head,n}return t.prototype.appendToTail=function(e){var n=this.tail.prev;n.next=e,e.prev=n,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!x.isUndefined(e)){var n="$"+this.toStr(e),i=this.table[n];return i}},t.prototype.getValue=function(e){var n=this.getLinkedDictionaryPair(e);if(!x.isUndefined(n))return n.value},t.prototype.remove=function(e){var n=this.getLinkedDictionaryPair(e);if(!x.isUndefined(n))return r.prototype.remove.call(this,e),n.unlink(),n.value},t.prototype.clear=function(){r.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,n){var i="$"+this.toStr(n.key);n.next=e.next,n.prev=e.prev,this.remove(e.key),n.prev.next=n,n.next.prev=n,this.table[i]=n,++this.nElements},t.prototype.setValue=function(e,n){if(!(x.isUndefined(e)||x.isUndefined(n))){var i=this.getLinkedDictionaryPair(e),o=new Pt(e,n),s="$"+this.toStr(e);if(x.isUndefined(i)){this.appendToTail(o),this.table[s]=o,++this.nElements;return}else return this.replace(i,o),i.value}},t.prototype.keys=function(){var e=[];return this.forEach(function(n,i){e.push(n)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n,i){e.push(i)}),e},t.prototype.forEach=function(e){for(var n=this.head.next;!Rt(n);){var i=e(n.key,n.value);if(i===!1)return;n=n.next}},t}(Ct.default);M.default=Lt;var V={};Object.defineProperty(V,"__esModule",{value:!0});var E=_,qt=w,$=y,Ft=function(){function r(t,e,n){n===void 0&&(n=!1),this.dict=new qt.default(t),this.equalsF=e||E.defaultEquals,this.allowDuplicate=n}return r.prototype.getValue=function(t){var e=this.dict.getValue(t);return E.isUndefined(e)?[]:$.copy(e)},r.prototype.setValue=function(t,e){if(E.isUndefined(t)||E.isUndefined(e))return!1;var n=this.dict.getValue(t);return E.isUndefined(n)?(this.dict.setValue(t,[e]),!0):!this.allowDuplicate&&$.contains(n,e,this.equalsF)?!1:(n.push(e),!0)},r.prototype.remove=function(t,e){if(E.isUndefined(e)){var n=this.dict.remove(t);return!E.isUndefined(n)}var i=this.dict.getValue(t);return!E.isUndefined(i)&&$.remove(i,e,this.equalsF)?(i.length===0&&this.dict.remove(t),!0):!1},r.prototype.keys=function(){return this.dict.keys()},r.prototype.values=function(){for(var t=this.dict.values(),e=[],n=0,i=t;n<i.length;n++)for(var o=i[n],s=0,l=o;s<l.length;s++){var d=l[s];e.push(d)}return e},r.prototype.containsKey=function(t){return this.dict.containsKey(t)},r.prototype.clear=function(){this.dict.clear()},r.prototype.size=function(){return this.dict.size()},r.prototype.isEmpty=function(){return this.dict.isEmpty()},r}();V.default=Ft;var R={},$t=S&&S.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(R,"__esModule",{value:!0});var jt=w,Ut=_,zt=function(r){$t(t,r);function t(e,n){var i=r.call(this,n)||this;return i.defaultFactoryFunction=e,i}return t.prototype.setDefault=function(e,n){var i=r.prototype.getValue.call(this,e);return Ut.isUndefined(i)?(this.setValue(e,n),n):i},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(jt.default);R.default=zt;var B={};Object.defineProperty(B,"__esModule",{value:!0});var Mt=_,Vt=P,Bt=function(){function r(t){this.heap=new Vt.default(Mt.reverseCompareFunction(t))}return r.prototype.enqueue=function(t){return this.heap.add(t)},r.prototype.add=function(t){return this.heap.add(t)},r.prototype.dequeue=function(){if(this.heap.size()!==0){var t=this.heap.peek();return this.heap.removeRoot(),t}},r.prototype.peek=function(){return this.heap.peek()},r.prototype.contains=function(t){return this.heap.contains(t)},r.prototype.isEmpty=function(){return this.heap.isEmpty()},r.prototype.size=function(){return this.heap.size()},r.prototype.clear=function(){this.heap.clear()},r.prototype.forEach=function(t){this.heap.forEach(t)},r}();B.default=Bt;var G={};Object.defineProperty(G,"__esModule",{value:!0});var Gt=D,Ht=function(){function r(){this.list=new Gt.default}return r.prototype.push=function(t){return this.list.add(t,0)},r.prototype.add=function(t){return this.list.add(t,0)},r.prototype.pop=function(){return this.list.removeElementAtIndex(0)},r.prototype.peek=function(){return this.list.first()},r.prototype.size=function(){return this.list.size()},r.prototype.contains=function(t,e){return this.list.contains(t,e)},r.prototype.isEmpty=function(){return this.list.isEmpty()},r.prototype.clear=function(){this.list.clear()},r.prototype.forEach=function(t){this.list.forEach(t)},r}();G.default=Ht;var H={};Object.defineProperty(H,"__esModule",{value:!0});var h;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER",r[r.INSIDE_AT_END=2]="INSIDE_AT_END",r[r.INSIDE_AT_START=3]="INSIDE_AT_START"})(h||(h={}));var Wt=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return r.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var n=e[t];this.createEmptyNodeIfNotExist(n)}},r.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,n=this.nodes[t];e<n.length;e++){var i=n[e];this.createEmptyNodeIfNotExist(i)}},r.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},r.prototype.getRootIds=function(){var t=this.rootIds.slice();return t},r.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},r.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},r.prototype.toObject=function(){return this.getObject()},r.prototype.flatten=function(){for(var t=this,e=[],n=0;n<this.rootIds.length;n++){var i=this.rootIds[n];e.push({id:i,level:0,hasParent:!1,childrenCount:0}),f(i,this.nodes,e,0)}for(var o=0,s=e;o<s.length;o++){var l=s[o];l.childrenCount=d(l.id)}return e;function d(m){if(t.nodes[m]){var a=t.nodes[m].length;return a}else return 0}function f(m,a,c,p){if(p===void 0&&(p=0),!(!m||!a||!c||!a[m])){p++;for(var N=a[m],I=0;I<N.length;I++){var W=N[I];c.push({id:W,level:p,hasParent:!0}),f(W,a,c,p)}p--}}},r.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,h.BEFORE)},r.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,h.AFTER)},r.prototype.moveIdIntoId=function(t,e,n){return n===void 0&&(n=!0),n?this.moveId(t,e,h.INSIDE_AT_START):this.moveId(t,e,h.INSIDE_AT_END)},r.prototype.swapRootIdWithRootId=function(t,e){var n=this.findRootId(t),i=this.findRootId(e);this.swapRootPositionWithRootPosition(n,i)},r.prototype.swapRootPositionWithRootPosition=function(t,e){var n=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=n},r.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},r.prototype.insertIdBeforeId=function(t,e){var n=this.findRootId(t);n>-1&&this.insertIdIntoRoot(e,n);for(var i in this.nodes)if(this.nodes.hasOwnProperty(i)){var o=this.findNodeId(i,t);o>-1&&this.insertIdIntoNode(i,e,o)}},r.prototype.insertIdAfterId=function(t,e){var n=this.findRootId(t);n>-1&&this.insertIdIntoRoot(e,n+1);for(var i in this.nodes)if(this.nodes.hasOwnProperty(i)){var o=this.findNodeId(i,t);o>-1&&this.insertIdIntoNode(i,e,o+1)}},r.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},r.prototype.insertIdIntoRoot=function(t,e){if(e===void 0)this.rootInsertAtEnd(t);else if(e<0){var n=this.rootIds.length;this.rootIds.splice(e+n+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},r.prototype.insertIdIntoNode=function(t,e,n){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],n===void 0)this.nodeInsertAtEnd(t,e);else if(n<0){var i=this.nodes[t].length;this.nodes[t].splice(n+i+1,0,e)}else this.nodes[t].splice(n,0,e)},r.prototype.moveId=function(t,e,n){var i=t,o=this.findRootId(i);this.nodes[e];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}var l=e,d=this.findRootId(l);this.nodes[e];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}if(o>-1)if(d>-1)switch(this.rootDelete(o),d>o&&d--,n){case h.BEFORE:this.insertIdIntoRoot(i,d);break;case h.AFTER:this.insertIdIntoRoot(i,d+1);break;case h.INSIDE_AT_START:this.nodeInsertAtStart(l,i);break;case h.INSIDE_AT_END:this.nodeInsertAtEnd(l,i);break}else{this.rootDelete(o);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var f=this.findNodeId(s,l);if(f>-1){switch(n){case h.BEFORE:this.insertIdIntoNode(s,i,f);break;case h.AFTER:this.insertIdIntoNode(s,i,f+1);break;case h.INSIDE_AT_START:this.nodeInsertAtStart(l,i);break;case h.INSIDE_AT_END:this.nodeInsertAtEnd(l,i);break}break}}}else if(d>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var f=this.findNodeId(s,i);if(f>-1){this.nodeDeleteAtIndex(s,f);break}}switch(n){case h.BEFORE:this.insertIdIntoRoot(i,d);break;case h.AFTER:this.insertIdIntoRoot(i,d+1);break;case h.INSIDE_AT_START:this.nodeInsertAtStart(l,i);break;case h.INSIDE_AT_END:this.nodeInsertAtEnd(l,i);break}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var f=this.findNodeId(s,i);if(f>-1){this.nodeDeleteAtIndex(s,f);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var f=this.findNodeId(s,l);if(f>-1){switch(n){case h.BEFORE:this.insertIdIntoNode(s,i,f);break;case h.AFTER:this.insertIdIntoNode(s,i,f+1);break;case h.INSIDE_AT_START:this.nodeInsertAtStart(l,i);break;case h.INSIDE_AT_END:this.nodeInsertAtEnd(l,i);break}break}}}},r.prototype.swapArrayElements=function(t,e,n){var i=t[e];return t[e]=t[n],t[n]=i,t},r.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},r.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],n=0;n<this.nodes[t].length;n++){var i=this.nodes[t][n];this.nodeAndSubNodesDelete(i),e.push(t)}this.nodeDelete(t);for(var n=0;n<e.length;n++)this.nodeDelete(e[n])},r.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var n=0;n<this.nodes[e].length;n++){var i=this.nodes[e][n];i===t&&this.nodeDeleteAtIndex(e,n)}},r.prototype.nodeDelete=function(t){delete this.nodes[t]},r.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},r.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},r.prototype.findNode=function(t){return this.nodes[t]},r.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},r.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},r.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},r.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},r.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},r.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},r}();H.default=Wt;Object.defineProperty(v,"__esModule",{value:!0});var Qt=y;v.arrays=Qt;var Xt=U;v.Bag=Xt.default;var Yt=z;v.BSTree=Yt.default;var Jt=O;v.BSTreeKV=Jt.default;var Zt=w,Kt=v.Dictionary=Zt.default,te=P;v.Heap=te.default;var ee=M;v.LinkedDictionary=ee.default;var re=D;v.LinkedList=re.default;var ne=V;v.MultiDictionary=ne.default;var ie=R;v.FactoryDictionary=ie.default;var oe=R;v.DefaultDictionary=oe.default;var se=C;v.Queue=se.default;var ae=B;v.PriorityQueue=ae.default;var ue=T;v.Set=ue.default;var le=G;v.Stack=le.default;var fe=H;v.MultiRootTree=fe.default;var he=_;v.util=he;function ce(r){return new Promise(t=>{const e=new Image;return e.crossOrigin="anonymous",e.src=r,e.onload=()=>t(Object.assign(e)),e})}function de(r){return new Promise(function(t,e){let n=!1;(function i(){if(n)return t();n=!0,setTimeout(i,r)})()})}function pe(){let r=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(r=!0)}(navigator.userAgent||navigator.vendor||window.opera),r}class ve{constructor(){u(this,"textureCache");this.textureCache=new Kt}async PrepareREGLShader(t,e){let n=fetch(t,{method:"GET",credentials:"include"}),i=fetch(e,{method:"GET",credentials:"include"});return Promise.all([n,i]).then(o=>Promise.all([o[0].text(),o[1].text()])).then(o=>({vertex_shader:o[0],fragment_shader:o[1]}))}async GetImage(t){if(this.textureCache.containsKey(t))return this.textureCache.getValue(t);let e=await ce(t);return this.textureCache.setValue(t,e),e}}function ye(r,t,e){const n=document.querySelector("#video");return n.playsInline=!0,n.crossOrigin="anonymous",n.muted=!1,new Promise((i,o)=>{n.addEventListener("canplaythrough",s=>{i(n)},!0),n.load()})}function me(){let r=document.querySelector("#webcam");return r.muted=!0,r.playsInline=!0,new Promise((t,e)=>{navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(n){r.srcObject=n,r.addEventListener("playing",()=>{t(r)},!0),r.play()}).catch(function(n){console.log("An error occured! "+n),t(null)})})}function _e(r,t,e,n,i,o){return console.log(i.height/i.width/n),r({frag:e,vert:t,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"src alpha",dstAlpha:0},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},attributes:{a_position:[[-1,-1],[-1,1],[1,1],[-1,-1],[1,1],[1,-1]]},uniforms:{webcamTex:i,videoTex:o,video_aspect_ratio:o.height/o.width/n,webcam_aspect_ratio:i.height/i.width/n},count:6})}const ge=Object.freeze({Video:"./texture/04.mp4",Audio:"./texture/04_1.aac"});class Ee extends nt{constructor(e,n,i){super(e);u(this,"reglCanvas");u(this,"webglUtility");u(this,"reglDrawCommand");u(this,"reglFrame");u(this,"width",1024);u(this,"height",750);u(this,"imagePosX",.5);u(this,"imagePosY",.5);u(this,"_audioDom");u(this,"_videoDom");u(this,"_webcamDom");u(this,"_videoTexture");u(this,"_webcamTexture");u(this,"_videoRestartFlag");u(this,"_imageDetectFlag");u(this,"_vertexFilePath");u(this,"_fragmentFilePath");u(this,"_start_btn_dom");u(this,"_ending_content_div");u(this,"_redirect_url_btn");u(this,"_restart_btn");u(this,"_job_title_icon");u(this,"_scan_icon");this._imageDetectFlag=!1,this.webglUtility=new ve,this._vertexFilePath=n,this._fragmentFilePath=i}reset(){this._videoDom.currentTime=0,this._videoDom.play(),this._videoRestartFlag=!0,this._ending_content_div.style.display="none",this._videoDom.style.display="block",setTimeout(()=>{this._job_title_icon.style.display="block",this._job_title_icon.classList.add("fadeInAnim")},11100)}async on_image_detected(){this._imageDetectFlag||(this._scan_icon=document.querySelector(".scan_icon"),this._start_btn_dom=document.querySelector("#video_start_btn"),this._ending_content_div=document.querySelector(".ending_content"),this._redirect_url_btn=document.querySelector("#outer_link"),this._restart_btn=document.querySelector("#restart_btn"),this._job_title_icon=document.querySelector(".job_title_icon"),console.log("on_image_detected"),this._imageDetectFlag=!0,this.SetCanvasSize(),this._start_btn_dom.style.display="block",this._scan_icon.style.display="none",this._start_btn_dom.addEventListener("click",async()=>{this._start_btn_dom.style.display="none",setTimeout(()=>{this._job_title_icon.style.display="block",this._job_title_icon.classList.add("fadeInAnim")},11100),console.log("click");let e=document.querySelector("#video"),n=document.querySelector("#arjs-video");await this.InitProcess(this._vertexFilePath,this._fragmentFilePath),e.style.display="block",n.remove()}),this._restart_btn.addEventListener("click",()=>{this.reset()}))}async InitProcess(e,n){await this.SetupWebglPipeline(e,n),this.DrawREGLCavnas(this.reglCanvas,this.reglDrawCommand)}async SetupWebglPipeline(e,n){this.reglCanvas=await this.CreatREGLCanvas(this._webglDom);let i=await this.webglUtility.PrepareREGLShader(e,n);this._videoDom=await ye(ge.Video,this.screenWidth,this.screenHeight),this._webcamDom=await me(),this._videoDom.play(),this._videoRestartFlag=!1,this._videoDom.addEventListener("ended",o=>{this._videoRestartFlag=!0,this._ending_content_div.style.display="flex",this._job_title_icon.style.display="none",this._job_title_icon.classList.remove("fadeInAnim"),this._videoDom.style.display="none"}),await de(200),this._webcamDom==null?this._webcamTexture=this.reglCanvas.texture():this._webcamTexture=this.reglCanvas.texture(this._webcamDom),this.reglDrawCommand=await _e(this.reglCanvas,i.vertex_shader,i.fragment_shader,this.aspect_ratio,this._webcamTexture,this._webcamTexture)}DrawREGLCavnas(e,n){let i=this;this.reglFrame=e.frame(function(o){e.clear({color:[0,0,0,1],depth:1}),i._webcamTexture.subimage(i._webcamDom),n({})})}SetCanvasSize(){super.SetCanvasSize()}}const we="#canvas_id",Ie="./glsl/simple_texture.vert",be="./glsl/glitch_effect.frag";let Y=new Ee(we,Ie,be);window.onload=function(){if(!pe()){let r=document.querySelector(".scan_icon"),t=document.querySelector(".alert_meesage");r.style.display="none",t.style.display="block",document.body.style.backgroundColor="gray";return}};window._glich_effect=Y;window.onfocus=function(){Y._videoRestartFlag&&location.reload()};export{S as c,Se as g};
